
RCS file: /cvs/xconq/xconq/kernel/system.h,v
Working file: system.h
head: 1.14
branch:
locks: strict
access list:
symbolic names:
	xconq-7_4_1-release: 1.7
	xconq-7_4-branch: 1.7.0.4
	xconq-7_4-branchpoint: 1.7
	xtconq-pre-removal: 1.7
	xconq-7_3_3-release: 1.7
	xconq-7_3_2-release: 1.7
	xconq-7_3_1-release: 1.7
	xconq-7_3-branch: 1.7.0.2
	xconq-7_3-branchpoint: 1.7
keyword substitution: kv
total revisions: 14;	selected revisions: 14
description:
----------------------------
revision 1.14
date: 2003/12/15 04:13:46;  author: mcdonald;  state: Exp;  lines: +3 -0
Enhance the configuration system to support strict ANSI compliance.
Fix various problems related to non-home working dirs on Windows.
Gain finer control over the linkage of Tkconq.
Cosmetic and ANSI compliance fixes.
Update and enhance Windows installer script.
----------------------------
revision 1.13
date: 2003/12/14 03:37:47;  author: ronne;  state: Exp;  lines: +4 -14
Add support for network games in file saving code.
----------------------------
revision 1.12
date: 2003/12/13 18:03:16;  author: mcdonald;  state: Exp;  lines: +1 -0
Start conversion to new file naming schema.
Fix typos in aclocal.m4.
----------------------------
revision 1.11
date: 2003/11/24 02:40:36;  author: mcdonald;  state: Exp;  lines: +4 -0
Fix exploitable buffer overflow in Tcl/Tk lib path processing.
Rename a command line argument size define.
----------------------------
revision 1.10
date: 2002/07/31 20:40:08;  author: ronne;  state: Exp;  lines: +4 -1
Add Doxygen comments to kernel includes.
----------------------------
revision 1.9
date: 2001/01/17 01:26:33;  author: ronne;  state: Exp;  lines: +0 -2
Clean up mac network code.
----------------------------
revision 1.8
date: 2001/01/08 16:24:40;  author: shebs;  state: Exp;  lines: +2 -2
	Add an SDL-based user interface.
	* sdl/: New directory.
	* sdl/Makefile.in, sdl/sdlconq.h, sdl/sdlcmd.c, sdl/sdlimf.c,
	sdl/sdlinit.c, sdl/sdlmain.c, sdl/sdlmap.c: New files.
	* images/cursor.bmp: New file, color cursor.
	* Makefile.in (SUBDIRS): Add sdl.
	(all-sdlconq): New target.
	* configure.in: Add option --enable-sdl.
	* configure: Regenerate.
	* x11/Makefile.in (sdlconq): New target.

	* system.h, mac.c, unix.c, win32.c (default_images_pathname): Add
	argument, use instead of compiled-in pathname.
	* init.c (init_library_path): Change caller.

	* imf.h (Image r, g, b): Solid color for an image.
	* imf.c (blacken_masked_area, blacken_mono_masked_area) Move to
	here from tkimf.c, add rgb args.
	(make_raw_palette): Move to here from tkimf.c.

	* ui.c. ui.h (dside): Define here instead of in each interface.
	(generic_transition): Similarly.
	(compute_x1_len): Move to here from tkmap.c.
	* macconq.c, macconq.h (dside): Remove.
	* macinit.c (generic_transition): Remove.
	* tkmain.c, tkconq.h (dside): Remove.
	* tkinit.c, tkmap.c (generic_transition): Remove.
	* cconq.c, cconq.h (dside): Remove.

	* tkcmd.c (require_unit): Test for NULL map.
	(get_selected_units): Similarly.
	(do_follow_action, do_message, do_quit, do_set_view_angle,
	do_survey, do_design): Similarly.
	* tkimg.c (tk_interp_image_1): Fill in generic image rgb,
	* tkmap.c (draw_current): Fix test for health bar color change.
	(draw_side_emblem): Draw black border around solid-color emblem.

	* ui.c (favored_type): Use unit_can_build_type.

	* read.c (interp_unit_defaults): Fix setup of default tooling.
----------------------------
revision 1.7
date: 1999/10/15 02:55:31;  author: shebs;  state: Exp;  lines: +2 -2
	* system.h (checkpoint_filename): Add argument.
	(remove_saved_game): Remove decl, no longer used.
	(remove_file): Declare.
	* mac.c, unix.c, win32.c: Similarly.
	* run2.c (save_checkpoint): New function, handles deletion of
	previous checkpoint file.
	(run_turn_start): Call it.
	* win32.c (stop_handler, crash_handler, hup_handler): Fix decls.
----------------------------
revision 1.6
date: 1999/09/21 02:25:17;  author: shebs;  state: Exp;  lines: +1 -1
	General cleanup of networking support.
	* side.h (side_has_local_display): Move to here from various
	files.
	* tp.h (add_remote_program, etc): Move decls here from tp.c.
	* tp.c (hosting): Define here.
	(download_game_module): Copy over more module properties.
	(receive_packet): Remove L packet.
	(receive_player_prop): Remove "Pyou" packet.
	* mac.c (hosting, connection_method_name): Remove, comment out
	code that uses.
	(open_remote_connection): Add hosting arg, return result.
	(close_remote_connection): Add argument.
	* socket.c: Similarly.
	* macconq.c, macconq.h, macinit.c, tkmain.c, wconq.c, xconq.c,
 	xtconq.c, xtmain.c, cconq.c: Update references.
	* system.h (open_remote_connection): Update decl.
	* skelconq.c, macinit.c, wconq.c, xconq.c, xtconq.c, cconq.c
 	(you_player, set_you_player, add_remote_player, launch_game):
 	Remove, no longer used.
	* wimfapp.c, imf2x.c, x2imf.c, ximfapp.c, xshowimf.c (my_rid,
 	numremotes): Remove, no longer needed.

	* tkmain.c (tk_start_new_game): New tcl command.
	(check_network): Call popup_game_dialog instead of only removing
	splash screen items.

	* wconq.c (host_the_game): Register self as first remote program
	(try_join_game): Send a player spec to host.
	(launch_game_2): New function.
----------------------------
revision 1.5
date: 1999/09/18 00:18:47;  author: shebs;  state: Exp;  lines: +4 -6
	* conq.h (enum setup_stage): Rename stages, add game_load_stage.
	* init.c (make_trial_assignments): Add remote players.
	* system.h (close_remote_connection): Add argument.
	* tp.c (remote_player_specs): New global array.
	(add_remote_players): New function.
	(download_to_player): Comment out launch packet send.
	(download_game_module): Use gameModule instead of GameModule.
	(broadcast_variants_chosen): Send randstate first.
	(receive_packet): Change 'G' packet to 'g', comment out 'L'
	packet, adjust stage names.
	(receive_remote_program): Record remote player spec.

	* tkconq.tcl (popup_game_dialog): Remove Network button.
	(toggle_remote_cmd): Remove.
	(select_player): Remove remote button.
	(popup_chat): Rename from popup_pregame_chat, allow deiconify,
	disable splash dialog buttons when brought up, put both host
	and join buttons at top.
	(my_rid): New global.
	(add_program): Disable connection buttons, activate New/Open
	buttons for host.
	(insert_chat_string): Allow arg of 0 to do generic inserts.
	(create_map_menus): Add chat item to file menu.
	(adjust_file_menu): New proc.
	* tkmain.c (tk_launch_game): Set stage, make trial assignments
	after broadcasting that variants chosen.
	(tk_launch_game_2): Call launch_game_2.
	(check_network): Adjust stage names.

	* xconq.c (main): Simplify startup sequence.
	(host_the_game): Fill in spec of host.
	(launch_game_2): New function.
----------------------------
revision 1.4
date: 1999/08/28 23:22:44;  author: shebs;  state: Exp;  lines: +29 -27
        * configure.in: Add --enable-build-warnings to control extra
        warnings, choose which subdirs to configure based on Unix vs
        Windows.
        * configure: Regenerate.
        * Makefile.in: Eliminate refs to lib-x11.
        * x11/Makefile.in: Ditto.
        * curses/Makefile.in, kernel/Makefile.in, tcltk/Makefile.in,
        x11/Makefile.in: Change UNIX_CFLAGS to autoconf-using HFLAGS,
        remove WARNING_CFLAGS.
        * actions.c, ai.c, ai.h, cmdline.c, cmdline.h, conq.h, generic.c,
        help.h, imf.c, imf.h, imf2imf.c, lisp.c, lisp.h, misc.h, system.h,
        imf2x.c, xcutil.h: Remove PARAMS usages.
        * gif.c, help.c, imf.c, imf2imf.c, lisp.c, unix.c, tkmain.c,
        wimfapp.c, imf2x.c, x2imf.c, xconq.c, xcutil.c: Remove unused
        variables, add prototypes, etc.
        * run2.c, side.c, macconq.c: Remove decl of update_area_display.
        * skelconq.c: Declare _dialog functions.
        * tkcmd.c: Remove exit_xconq decl.
        * wconq.c (check_player_displays): Remove uses.
        * xconq.c: Include tkconq.h.

        * tkconq.h (IMFLIB): Remove.
        (exit_xconq): Declare.
        * tkimf.c, tkinit.c: Remove imflib uses.
        * xconq.h, xcutil.c: Ditto.
        * ximf.c, xinit.c: Ditto.
        * PROJECTS: Remove lib-x11 item.
----------------------------
revision 1.3
date: 1999/08/12 03:08:23;  author: shebs;  state: Exp;  lines: +1 -0
	* system.h (preferences_filename): Declare.
----------------------------
revision 1.2
date: 1999/06/14 18:48:25;  author: shebs;  state: Exp;  lines: +3 -2
	* system.h (default_images_pathname): Declare.
	* init.c (init_library_path): Add search for image library.
	* mac.c (XCONQIMAGES): New define.
	(default_library_pathname): Rename from default_library_filename.
	(default_images_pathname): New function.
	* unix.c: Similarly.
	* ui.c (get_generic_images): Iterate over all library paths.
	* ui.c (calc_view_misc): Restore hexagon_adjust addition.
----------------------------
revision 1.1
date: 1999/04/28 19:36:33;  author: shebs;  state: Exp;
Initial checkin.
=============================================================================
