
RCS file: /cvs/xconq/xconq/kernel/gif.c,v
Working file: gif.c
head: 1.16
branch:
locks: strict
access list:
symbolic names:
	xconq-7_4_1-release: 1.12
	xconq-7_4-branch: 1.12.0.2
	xconq-7_4-branchpoint: 1.12
	xtconq-pre-removal: 1.11
	xconq-7_3_3-release: 1.10
	xconq-7_3_2-release: 1.10
	xconq-7_3_1-release: 1.10
	xconq-7_3-branch: 1.10.0.2
	xconq-7_3-branchpoint: 1.10
keyword substitution: kv
total revisions: 16;	selected revisions: 16
description:
----------------------------
revision 1.16
date: 2004/03/07 14:41:53;  author: ronne;  state: Exp;  lines: +11 -9
Fix so that games can be run from non-standard locations.
----------------------------
revision 1.15
date: 2003/07/20 10:36:25;  author: ronne;  state: Exp;  lines: +0 -18
Improve tcltk graphics on Windows.
----------------------------
revision 1.14
date: 2003/05/24 11:39:34;  author: ronne;  state: Exp;  lines: +5 -22
Fixes and improvements to imfapp.
----------------------------
revision 1.13
date: 2002/05/08 23:51:17;  author: ronne;  state: Exp;  lines: +8 -26
Make sources C++ compatible.
----------------------------
revision 1.12
date: 2000/10/04 16:10:10;  author: shebs;  state: Exp;  lines: +13 -11
	Move use_clip_mask to generic code, use to control creation
	of transparent black in images.
	* imf.c, imf.h (use_clip_mask): Move to here from tkimf.c.
	* gif.c (get_gif_from_file): Test it.
	* wconq.c, wimfapp.c, xconq.c (use_clip_mask): Remove decl.

	* imf.c, imf.h (MAXIMAGEPALETTES, palettes, numpalettes,
	sort_all_palettes): Remove, no longer used.
	* imf.h (ImagePalette): Ditto.
----------------------------
revision 1.11
date: 2000/06/21 00:21:43;  author: ronne;  state: Exp;  lines: +17 -0
Fix IMFApp problems, prepare use of big icons.
----------------------------
revision 1.10
date: 1999/09/05 17:25:03;  author: ronne;  state: Exp;  lines: +0 -17
Rewrite new ai code. Fix various other bugs.
----------------------------
revision 1.9
date: 1999/08/28 23:22:44;  author: shebs;  state: Exp;  lines: +13 -17
        * configure.in: Add --enable-build-warnings to control extra
        warnings, choose which subdirs to configure based on Unix vs
        Windows.
        * configure: Regenerate.
        * Makefile.in: Eliminate refs to lib-x11.
        * x11/Makefile.in: Ditto.
        * curses/Makefile.in, kernel/Makefile.in, tcltk/Makefile.in,
        x11/Makefile.in: Change UNIX_CFLAGS to autoconf-using HFLAGS,
        remove WARNING_CFLAGS.
        * actions.c, ai.c, ai.h, cmdline.c, cmdline.h, conq.h, generic.c,
        help.h, imf.c, imf.h, imf2imf.c, lisp.c, lisp.h, misc.h, system.h,
        imf2x.c, xcutil.h: Remove PARAMS usages.
        * gif.c, help.c, imf.c, imf2imf.c, lisp.c, unix.c, tkmain.c,
        wimfapp.c, imf2x.c, x2imf.c, xconq.c, xcutil.c: Remove unused
        variables, add prototypes, etc.
        * run2.c, side.c, macconq.c: Remove decl of update_area_display.
        * skelconq.c: Declare _dialog functions.
        * tkcmd.c: Remove exit_xconq decl.
        * wconq.c (check_player_displays): Remove uses.
        * xconq.c: Include tkconq.h.

        * tkconq.h (IMFLIB): Remove.
        (exit_xconq): Declare.
        * tkimf.c, tkinit.c: Remove imflib uses.
        * xconq.h, xcutil.c: Ditto.
        * ximf.c, xinit.c: Ditto.
        * PROJECTS: Remove lib-x11 item.
----------------------------
revision 1.8
date: 1999/07/25 14:27:42;  author: ronne;  state: Exp;  lines: +3 -0
Fix prototype and type cast problems.
----------------------------
revision 1.7
date: 1999/07/17 14:35:21;  author: ronne;  state: Exp;  lines: +22 -2
Change fopen to open_file.
----------------------------
revision 1.6
date: 1999/07/16 02:46:22;  author: shebs;  state: Exp;  lines: +4 -1
	* imf.c, gif.c: Improve formatting and comments, don't allocate an
 	extra color cell.
----------------------------
revision 1.5
date: 1999/07/13 20:05:18;  author: shebs;  state: Exp;  lines: +2 -14
	* gif.c (get_gif_from_file): Remove commented-out code.
----------------------------
revision 1.4
date: 1999/07/09 16:19:31;  author: shebs;  state: Exp;  lines: +12 -10
	* stdt44x48.gif, terrain.imf: Add another desert image, try a
	different swamp image, roughen the plains images slightly.
	* gif.c (get_gif_from_file): Comment out file image blackening.
	* PROJECTS: Whack some no-longer-interesting ideas, add more
	thoughts about doc and agreements.
----------------------------
revision 1.3
date: 1999/07/06 19:56:13;  author: shebs;  state: Exp;  lines: +137 -69
	* imf.c (interp_image): Remove unimportant warning about palette
	change.
	(make_raw_mono_data): New function.
	(add_shrunken_image, add_magnified_image): Call it.
	(get_file_image): Link the new file image into the list.
	(make_image_from_file_image): Allocate space for one extra color.
	* gif.c (get_gif_from_file): Return a result, also identify a
	black color and paint into transparent areas.
	(get_gif): Use the result from get_gif_from_file.
	(ReadGIF, etc): Return failure codes everywhere.
----------------------------
revision 1.2
date: 1999/06/22 19:01:50;  author: shebs;  state: Exp;  lines: +40 -21
	* gif.c (get_gif): Add search in ../images for images.
	(get_gif_from_file): New function, was body of get_gif.
	* imf.c (make_image_from_file_image): Add a warning.
	(load_file_image): Use success/fail result from get_gif.
----------------------------
revision 1.1
date: 1999/06/14 18:51:26;  author: shebs;  state: Exp;
	Add support for reading images from GIFs directly, plus ability
	to collect multiple images from a single "file image".
	* kernel/gif.c: New file, GIF reader lifted from NetPBM.
	* kernel/Makefile.in: Compile it.
	* keyword.def (file): New keyword.
	* imf.h (Image filedata, file_image, subimages): New slots.
	(FileImage): New structure.
	* imf.c (K_FILE_): New enum.
	(file_images): New global.
	(get_img): Replace dummy style arg with subimage arg.
	(get_subimg): New function.
	(interp_image): Recognize connection and border images, and
	images whose data is in a file.
	(make_image_from_file_image): New function.
	(add_shrunken_image, add_magnified_image): Call it.
	(best_image): Rewrite to handle images that are mixes of
	regular images and tiles.
	(get_file_image, load_file_image): New functions.
	* ui.c (halfsides): New global array.
	* tkimf.c (tk_interp_image): Add subimg arg, change callers,
	call make_image_from_file_image and self recursively.
	* tkinit.c (bordpics, connpics, rrpics): Remove, no longer needed.
	* tkmap.c (set_terrain_gc_for_image): Only do for tiles.
	(draw_unseen_fuzz): Use halfsides array.
	(draw_borders, draw_connections): Rewrite to use subimages.
=============================================================================
